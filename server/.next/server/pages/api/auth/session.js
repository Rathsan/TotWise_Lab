"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/session";
exports.ids = ["pages/api/auth/session"];
exports.modules = {

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsession&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fsession.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsession&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fsession.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_session_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/auth/session.js */ \"(api)/./pages/api/auth/session.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_session_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_auth_session_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_session_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_session_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/session\",\n        pathname: \"/api/auth/session\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_auth_session_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmF1dGglMkZzZXNzaW9uJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZhdXRoJTJGc2Vzc2lvbi5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN3RDtBQUN4RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsdURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHVEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvdHdpc2Utc2VydmVyLz85Yjk1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvYXV0aC9zZXNzaW9uLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9zZXNzaW9uXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9zZXNzaW9uXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsession&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fsession.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/session.js":
/*!************************!*\
  !*** ./lib/session.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSessionCookie: () => (/* binding */ clearSessionCookie),\n/* harmony export */   getSessionToken: () => (/* binding */ getSessionToken),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   signSession: () => (/* binding */ signSession),\n/* harmony export */   verifySession: () => (/* binding */ verifySession)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst SESSION_COOKIE = \"totwise_session\";\nconst SESSION_TTL_SECONDS = 60 * 60 * 24 * 45;\nconst SESSION_SECRET = process.env.SESSION_SECRET;\nif (!SESSION_SECRET) {\n    throw new Error(\"Missing SESSION_SECRET\");\n}\nfunction signSession(payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, SESSION_SECRET, {\n        expiresIn: SESSION_TTL_SECONDS\n    });\n}\nfunction verifySession(token) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, SESSION_SECRET);\n}\nfunction setSessionCookie(res, token) {\n    const cookie = (0,cookie__WEBPACK_IMPORTED_MODULE_1__.serialize)(SESSION_COOKIE, token, {\n        httpOnly: true,\n        sameSite: \"lax\",\n        path: \"/\",\n        secure: \"development\" === \"production\",\n        maxAge: SESSION_TTL_SECONDS\n    });\n    res.setHeader(\"Set-Cookie\", cookie);\n}\nfunction clearSessionCookie(res) {\n    const cookie = (0,cookie__WEBPACK_IMPORTED_MODULE_1__.serialize)(SESSION_COOKIE, \"\", {\n        httpOnly: true,\n        sameSite: \"lax\",\n        path: \"/\",\n        secure: \"development\" === \"production\",\n        expires: new Date(0)\n    });\n    res.setHeader(\"Set-Cookie\", cookie);\n}\nfunction getSessionToken(req) {\n    if (req.cookies && req.cookies[SESSION_COOKIE]) {\n        return req.cookies[SESSION_COOKIE];\n    }\n    const header = req.headers.cookie || \"\";\n    const match = header.match(new RegExp(`${SESSION_COOKIE}=([^;]+)`));\n    return match ? match[1] : null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2Vzc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBK0I7QUFDSTtBQUVuQyxNQUFNRSxpQkFBaUI7QUFDdkIsTUFBTUMsc0JBQXNCLEtBQUssS0FBSyxLQUFLO0FBQzNDLE1BQU1DLGlCQUFpQkMsUUFBUUMsR0FBRyxDQUFDRixjQUFjO0FBRWpELElBQUksQ0FBQ0EsZ0JBQWdCO0lBQ25CLE1BQU0sSUFBSUcsTUFBTTtBQUNsQjtBQUVPLFNBQVNDLFlBQVlDLE9BQU87SUFDakMsT0FBT1Qsd0RBQVEsQ0FBQ1MsU0FBU0wsZ0JBQWdCO1FBQUVPLFdBQVdSO0lBQW9CO0FBQzVFO0FBRU8sU0FBU1MsY0FBY0MsS0FBSztJQUNqQyxPQUFPYiwwREFBVSxDQUFDYSxPQUFPVDtBQUMzQjtBQUVPLFNBQVNXLGlCQUFpQkMsR0FBRyxFQUFFSCxLQUFLO0lBQ3pDLE1BQU1JLFNBQVNoQixpREFBU0EsQ0FBQ0MsZ0JBQWdCVyxPQUFPO1FBQzlDSyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsTUFBTTtRQUNOQyxRQUFRaEIsa0JBQXlCO1FBQ2pDaUIsUUFBUW5CO0lBQ1Y7SUFDQWEsSUFBSU8sU0FBUyxDQUFDLGNBQWNOO0FBQzlCO0FBRU8sU0FBU08sbUJBQW1CUixHQUFHO0lBQ3BDLE1BQU1DLFNBQVNoQixpREFBU0EsQ0FBQ0MsZ0JBQWdCLElBQUk7UUFDM0NnQixVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsTUFBTTtRQUNOQyxRQUFRaEIsa0JBQXlCO1FBQ2pDb0IsU0FBUyxJQUFJQyxLQUFLO0lBQ3BCO0lBQ0FWLElBQUlPLFNBQVMsQ0FBQyxjQUFjTjtBQUM5QjtBQUVPLFNBQVNVLGdCQUFnQkMsR0FBRztJQUNqQyxJQUFJQSxJQUFJQyxPQUFPLElBQUlELElBQUlDLE9BQU8sQ0FBQzNCLGVBQWUsRUFBRTtRQUM5QyxPQUFPMEIsSUFBSUMsT0FBTyxDQUFDM0IsZUFBZTtJQUNwQztJQUNBLE1BQU00QixTQUFTRixJQUFJRyxPQUFPLENBQUNkLE1BQU0sSUFBSTtJQUNyQyxNQUFNZSxRQUFRRixPQUFPRSxLQUFLLENBQUMsSUFBSUMsT0FBTyxDQUFDLEVBQUUvQixlQUFlLFFBQVEsQ0FBQztJQUNqRSxPQUFPOEIsUUFBUUEsS0FBSyxDQUFDLEVBQUUsR0FBRztBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvdHdpc2Utc2VydmVyLy4vbGliL3Nlc3Npb24uanM/ZmY5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBzZXJpYWxpemUgfSBmcm9tICdjb29raWUnO1xuXG5jb25zdCBTRVNTSU9OX0NPT0tJRSA9ICd0b3R3aXNlX3Nlc3Npb24nO1xuY29uc3QgU0VTU0lPTl9UVExfU0VDT05EUyA9IDYwICogNjAgKiAyNCAqIDQ1O1xuY29uc3QgU0VTU0lPTl9TRUNSRVQgPSBwcm9jZXNzLmVudi5TRVNTSU9OX1NFQ1JFVDtcblxuaWYgKCFTRVNTSU9OX1NFQ1JFVCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU0VTU0lPTl9TRUNSRVQnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25TZXNzaW9uKHBheWxvYWQpIHtcbiAgcmV0dXJuIGp3dC5zaWduKHBheWxvYWQsIFNFU1NJT05fU0VDUkVULCB7IGV4cGlyZXNJbjogU0VTU0lPTl9UVExfU0VDT05EUyB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVNlc3Npb24odG9rZW4pIHtcbiAgcmV0dXJuIGp3dC52ZXJpZnkodG9rZW4sIFNFU1NJT05fU0VDUkVUKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNlc3Npb25Db29raWUocmVzLCB0b2tlbikge1xuICBjb25zdCBjb29raWUgPSBzZXJpYWxpemUoU0VTU0lPTl9DT09LSUUsIHRva2VuLCB7XG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgIHBhdGg6ICcvJyxcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXG4gICAgbWF4QWdlOiBTRVNTSU9OX1RUTF9TRUNPTkRTXG4gIH0pO1xuICByZXMuc2V0SGVhZGVyKCdTZXQtQ29va2llJywgY29va2llKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU2Vzc2lvbkNvb2tpZShyZXMpIHtcbiAgY29uc3QgY29va2llID0gc2VyaWFsaXplKFNFU1NJT05fQ09PS0lFLCAnJywge1xuICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBwYXRoOiAnLycsXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgIGV4cGlyZXM6IG5ldyBEYXRlKDApXG4gIH0pO1xuICByZXMuc2V0SGVhZGVyKCdTZXQtQ29va2llJywgY29va2llKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlc3Npb25Ub2tlbihyZXEpIHtcbiAgaWYgKHJlcS5jb29raWVzICYmIHJlcS5jb29raWVzW1NFU1NJT05fQ09PS0lFXSkge1xuICAgIHJldHVybiByZXEuY29va2llc1tTRVNTSU9OX0NPT0tJRV07XG4gIH1cbiAgY29uc3QgaGVhZGVyID0gcmVxLmhlYWRlcnMuY29va2llIHx8ICcnO1xuICBjb25zdCBtYXRjaCA9IGhlYWRlci5tYXRjaChuZXcgUmVnRXhwKGAke1NFU1NJT05fQ09PS0lFfT0oW147XSspYCkpO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7XG59XG4iXSwibmFtZXMiOlsiand0Iiwic2VyaWFsaXplIiwiU0VTU0lPTl9DT09LSUUiLCJTRVNTSU9OX1RUTF9TRUNPTkRTIiwiU0VTU0lPTl9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJzaWduU2Vzc2lvbiIsInBheWxvYWQiLCJzaWduIiwiZXhwaXJlc0luIiwidmVyaWZ5U2Vzc2lvbiIsInRva2VuIiwidmVyaWZ5Iiwic2V0U2Vzc2lvbkNvb2tpZSIsInJlcyIsImNvb2tpZSIsImh0dHBPbmx5Iiwic2FtZVNpdGUiLCJwYXRoIiwic2VjdXJlIiwibWF4QWdlIiwic2V0SGVhZGVyIiwiY2xlYXJTZXNzaW9uQ29va2llIiwiZXhwaXJlcyIsIkRhdGUiLCJnZXRTZXNzaW9uVG9rZW4iLCJyZXEiLCJjb29raWVzIiwiaGVhZGVyIiwiaGVhZGVycyIsIm1hdGNoIiwiUmVnRXhwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/session.js\n");

/***/ }),

/***/ "(api)/./lib/subscription.js":
/*!*****************************!*\
  !*** ./lib/subscription.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureUser: () => (/* binding */ ensureUser),\n/* harmony export */   getActiveSubscription: () => (/* binding */ getActiveSubscription),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   hasActiveSubscription: () => (/* binding */ hasActiveSubscription)\n/* harmony export */ });\n/* harmony import */ var _supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabaseAdmin */ \"(api)/./lib/supabaseAdmin.js\");\n/* harmony import */ var _validate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validate */ \"(api)/./lib/validate.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__]);\n_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function getUserByEmail(email) {\n    const { data, error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"*\").eq(\"email\", email).maybeSingle();\n    if (error) throw error;\n    return data;\n}\nasync function ensureUser(email) {\n    const existing = await getUserByEmail(email);\n    if (existing) return existing;\n    const { data, error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").insert({\n        email\n    }).select(\"*\").single();\n    if (error) throw error;\n    return data;\n}\nasync function hasActiveSubscription(userId) {\n    const { data, error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"subscriptions\").select(\"id\").eq(\"user_id\", userId).eq(\"status\", \"ACTIVE\").eq(\"plan\", _validate__WEBPACK_IMPORTED_MODULE_1__.PLAN_ID).gt(\"expiry_date\", new Date().toISOString()).limit(1).maybeSingle();\n    if (error) throw error;\n    return !!data;\n}\nasync function getActiveSubscription(userId) {\n    const { data, error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"subscriptions\").select(\"*\").eq(\"user_id\", userId).eq(\"status\", \"ACTIVE\").eq(\"plan\", _validate__WEBPACK_IMPORTED_MODULE_1__.PLAN_ID).gt(\"expiry_date\", new Date().toISOString()).order(\"expiry_date\", {\n        ascending: false\n    }).limit(1).maybeSingle();\n    if (error) throw error;\n    return data || null;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3Vic2NyaXB0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNYO0FBRTlCLGVBQWVFLGVBQWVDLEtBQUs7SUFDeEMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1MLHlEQUFhQSxDQUN4Q00sSUFBSSxDQUFDLFNBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsU0FBU0wsT0FDWk0sV0FBVztJQUNkLElBQUlKLE9BQU8sTUFBTUE7SUFDakIsT0FBT0Q7QUFDVDtBQUVPLGVBQWVNLFdBQVdQLEtBQUs7SUFDcEMsTUFBTVEsV0FBVyxNQUFNVCxlQUFlQztJQUN0QyxJQUFJUSxVQUFVLE9BQU9BO0lBQ3JCLE1BQU0sRUFBRVAsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNTCx5REFBYUEsQ0FDeENNLElBQUksQ0FBQyxTQUNMTSxNQUFNLENBQUM7UUFBRVQ7SUFBTSxHQUNmSSxNQUFNLENBQUMsS0FDUE0sTUFBTTtJQUNULElBQUlSLE9BQU8sTUFBTUE7SUFDakIsT0FBT0Q7QUFDVDtBQUVPLGVBQWVVLHNCQUFzQkMsTUFBTTtJQUNoRCxNQUFNLEVBQUVYLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUwseURBQWFBLENBQ3hDTSxJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQyxNQUNQQyxFQUFFLENBQUMsV0FBV08sUUFDZFAsRUFBRSxDQUFDLFVBQVUsVUFDYkEsRUFBRSxDQUFDLFFBQVFQLDhDQUFPQSxFQUNsQmUsRUFBRSxDQUFDLGVBQWUsSUFBSUMsT0FBT0MsV0FBVyxJQUN4Q0MsS0FBSyxDQUFDLEdBQ05WLFdBQVc7SUFDZCxJQUFJSixPQUFPLE1BQU1BO0lBQ2pCLE9BQU8sQ0FBQyxDQUFDRDtBQUNYO0FBRU8sZUFBZWdCLHNCQUFzQkwsTUFBTTtJQUNoRCxNQUFNLEVBQUVYLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUwseURBQWFBLENBQ3hDTSxJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsV0FBV08sUUFDZFAsRUFBRSxDQUFDLFVBQVUsVUFDYkEsRUFBRSxDQUFDLFFBQVFQLDhDQUFPQSxFQUNsQmUsRUFBRSxDQUFDLGVBQWUsSUFBSUMsT0FBT0MsV0FBVyxJQUN4Q0csS0FBSyxDQUFDLGVBQWU7UUFBRUMsV0FBVztJQUFNLEdBQ3hDSCxLQUFLLENBQUMsR0FDTlYsV0FBVztJQUNkLElBQUlKLE9BQU8sTUFBTUE7SUFDakIsT0FBT0QsUUFBUTtBQUNqQiIsInNvdXJjZXMiOlsid2VicGFjazovL3RvdHdpc2Utc2VydmVyLy4vbGliL3N1YnNjcmlwdGlvbi5qcz9iNDQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICcuL3N1cGFiYXNlQWRtaW4nO1xuaW1wb3J0IHsgUExBTl9JRCB9IGZyb20gJy4vdmFsaWRhdGUnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWwpIHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgIC5mcm9tKCd1c2VycycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxuICAgIC5tYXliZVNpbmdsZSgpO1xuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICByZXR1cm4gZGF0YTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuc3VyZVVzZXIoZW1haWwpIHtcbiAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBnZXRVc2VyQnlFbWFpbChlbWFpbCk7XG4gIGlmIChleGlzdGluZykgcmV0dXJuIGV4aXN0aW5nO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgLmZyb20oJ3VzZXJzJylcbiAgICAuaW5zZXJ0KHsgZW1haWwgfSlcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuc2luZ2xlKCk7XG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gIHJldHVybiBkYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzQWN0aXZlU3Vic2NyaXB0aW9uKHVzZXJJZCkge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgLmZyb20oJ3N1YnNjcmlwdGlvbnMnKVxuICAgIC5zZWxlY3QoJ2lkJylcbiAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXG4gICAgLmVxKCdzdGF0dXMnLCAnQUNUSVZFJylcbiAgICAuZXEoJ3BsYW4nLCBQTEFOX0lEKVxuICAgIC5ndCgnZXhwaXJ5X2RhdGUnLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpXG4gICAgLmxpbWl0KDEpXG4gICAgLm1heWJlU2luZ2xlKCk7XG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gIHJldHVybiAhIWRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVTdWJzY3JpcHRpb24odXNlcklkKSB7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAuZnJvbSgnc3Vic2NyaXB0aW9ucycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgIC5lcSgnc3RhdHVzJywgJ0FDVElWRScpXG4gICAgLmVxKCdwbGFuJywgUExBTl9JRClcbiAgICAuZ3QoJ2V4cGlyeV9kYXRlJywgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKVxuICAgIC5vcmRlcignZXhwaXJ5X2RhdGUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAubGltaXQoMSlcbiAgICAubWF5YmVTaW5nbGUoKTtcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgcmV0dXJuIGRhdGEgfHwgbnVsbDtcbn1cbiJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwiUExBTl9JRCIsImdldFVzZXJCeUVtYWlsIiwiZW1haWwiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJtYXliZVNpbmdsZSIsImVuc3VyZVVzZXIiLCJleGlzdGluZyIsImluc2VydCIsInNpbmdsZSIsImhhc0FjdGl2ZVN1YnNjcmlwdGlvbiIsInVzZXJJZCIsImd0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibGltaXQiLCJnZXRBY3RpdmVTdWJzY3JpcHRpb24iLCJvcmRlciIsImFzY2VuZGluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/subscription.js\n");

/***/ }),

/***/ "(api)/./lib/supabaseAdmin.js":
/*!******************************!*\
  !*** ./lib/supabaseAdmin.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl || !serviceRoleKey) {\n    throw new Error(\"Missing Supabase admin credentials\");\n}\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, serviceRoleKey, {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2VBZG1pbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFxRDtBQUVyRCxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7QUFDNUMsTUFBTUMsaUJBQWlCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtBQUU1RCxJQUFJLENBQUNMLGVBQWUsQ0FBQ0ksZ0JBQWdCO0lBQ25DLE1BQU0sSUFBSUUsTUFBTTtBQUNsQjtBQUVPLE1BQU1DLGdCQUFnQlIsbUVBQVlBLENBQUNDLGFBQWFJLGdCQUFnQjtJQUNyRUksTUFBTTtRQUNKQyxnQkFBZ0I7UUFDaEJDLGtCQUFrQjtJQUNwQjtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3R3aXNlLXNlcnZlci8uL2xpYi9zdXBhYmFzZUFkbWluLmpzPzY2ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkw7XG5jb25zdCBzZXJ2aWNlUm9sZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk7XG5cbmlmICghc3VwYWJhc2VVcmwgfHwgIXNlcnZpY2VSb2xlS2V5KSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBhZG1pbiBjcmVkZW50aWFscycpO1xufVxuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc2VydmljZVJvbGVLZXksIHtcbiAgYXV0aDoge1xuICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZVxuICB9XG59KTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzZXJ2aWNlUm9sZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJFcnJvciIsInN1cGFiYXNlQWRtaW4iLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJhdXRvUmVmcmVzaFRva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/supabaseAdmin.js\n");

/***/ }),

/***/ "(api)/./lib/validate.js":
/*!*************************!*\
  !*** ./lib/validate.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PLAN_AMOUNT_INR: () => (/* binding */ PLAN_AMOUNT_INR),\n/* harmony export */   PLAN_AMOUNT_PAISE: () => (/* binding */ PLAN_AMOUNT_PAISE),\n/* harmony export */   PLAN_ID: () => (/* binding */ PLAN_ID),\n/* harmony export */   SUBSCRIPTION_DAYS: () => (/* binding */ SUBSCRIPTION_DAYS),\n/* harmony export */   isValidEmail: () => (/* binding */ isValidEmail)\n/* harmony export */ });\nconst PLAN_ID = \"age_2_3\";\nconst PLAN_AMOUNT_INR = 199;\nconst PLAN_AMOUNT_PAISE = PLAN_AMOUNT_INR * 100;\nconst SUBSCRIPTION_DAYS = 45;\nfunction isValidEmail(email) {\n    if (!email) return false;\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(String(email).toLowerCase());\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdmFsaWRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxNQUFNQSxVQUFVLFVBQVU7QUFDMUIsTUFBTUMsa0JBQWtCLElBQUk7QUFDNUIsTUFBTUMsb0JBQW9CRCxrQkFBa0IsSUFBSTtBQUNoRCxNQUFNRSxvQkFBb0IsR0FBRztBQUU3QixTQUFTQyxhQUFhQyxLQUFLO0lBQ2hDLElBQUksQ0FBQ0EsT0FBTyxPQUFPO0lBQ25CLE9BQU8sNkJBQTZCQyxJQUFJLENBQUNDLE9BQU9GLE9BQU9HLFdBQVc7QUFDcEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3R3aXNlLXNlcnZlci8uL2xpYi92YWxpZGF0ZS5qcz8wMDkwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBQTEFOX0lEID0gJ2FnZV8yXzMnO1xuZXhwb3J0IGNvbnN0IFBMQU5fQU1PVU5UX0lOUiA9IDE5OTtcbmV4cG9ydCBjb25zdCBQTEFOX0FNT1VOVF9QQUlTRSA9IFBMQU5fQU1PVU5UX0lOUiAqIDEwMDtcbmV4cG9ydCBjb25zdCBTVUJTQ1JJUFRJT05fREFZUyA9IDQ1O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsKSB7XG4gIGlmICghZW1haWwpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvLnRlc3QoU3RyaW5nKGVtYWlsKS50b0xvd2VyQ2FzZSgpKTtcbn1cbiJdLCJuYW1lcyI6WyJQTEFOX0lEIiwiUExBTl9BTU9VTlRfSU5SIiwiUExBTl9BTU9VTlRfUEFJU0UiLCJTVUJTQ1JJUFRJT05fREFZUyIsImlzVmFsaWRFbWFpbCIsImVtYWlsIiwidGVzdCIsIlN0cmluZyIsInRvTG93ZXJDYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/validate.js\n");

/***/ }),

/***/ "(api)/./pages/api/auth/session.js":
/*!***********************************!*\
  !*** ./pages/api/auth/session.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/session */ \"(api)/./lib/session.js\");\n/* harmony import */ var _lib_subscription__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/subscription */ \"(api)/./lib/subscription.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_subscription__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_subscription__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        res.setHeader(\"Allow\", \"GET\");\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const token = (0,_lib_session__WEBPACK_IMPORTED_MODULE_0__.getSessionToken)(req);\n    if (!token) {\n        return res.status(401).json({\n            error: \"Unauthenticated\"\n        });\n    }\n    try {\n        const payload = (0,_lib_session__WEBPACK_IMPORTED_MODULE_0__.verifySession)(token);\n        const activeSub = await (0,_lib_subscription__WEBPACK_IMPORTED_MODULE_1__.getActiveSubscription)(payload.userId);\n        if (!activeSub) {\n            return res.status(403).json({\n                error: \"Subscription inactive\"\n            });\n        }\n        const refreshedToken = (0,_lib_session__WEBPACK_IMPORTED_MODULE_0__.signSession)({\n            userId: payload.userId,\n            email: payload.email\n        });\n        (0,_lib_session__WEBPACK_IMPORTED_MODULE_0__.setSessionCookie)(res, refreshedToken);\n        return res.status(200).json({\n            authenticated: true,\n            email: payload.email,\n            userId: payload.userId\n        });\n    } catch (error) {\n        return res.status(401).json({\n            error: \"Unauthenticated\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9zZXNzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxRztBQUNuQztBQUVuRCxlQUFlSyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEJELElBQUlFLFNBQVMsQ0FBQyxTQUFTO1FBQ3ZCLE9BQU9GLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLE1BQU1DLFFBQVFiLDZEQUFlQSxDQUFDTTtJQUM5QixJQUFJLENBQUNPLE9BQU87UUFDVixPQUFPTixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBa0I7SUFDekQ7SUFFQSxJQUFJO1FBQ0YsTUFBTUUsVUFBVWIsMkRBQWFBLENBQUNZO1FBQzlCLE1BQU1FLFlBQVksTUFBTVgsd0VBQXFCQSxDQUFDVSxRQUFRRSxNQUFNO1FBQzVELElBQUksQ0FBQ0QsV0FBVztZQUNkLE9BQU9SLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBd0I7UUFDL0Q7UUFDQSxNQUFNSyxpQkFBaUJmLHlEQUFXQSxDQUFDO1lBQUVjLFFBQVFGLFFBQVFFLE1BQU07WUFBRUUsT0FBT0osUUFBUUksS0FBSztRQUFDO1FBQ2xGZiw4REFBZ0JBLENBQUNJLEtBQUtVO1FBQ3RCLE9BQU9WLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJRLGVBQWU7WUFDZkQsT0FBT0osUUFBUUksS0FBSztZQUNwQkYsUUFBUUYsUUFBUUUsTUFBTTtRQUN4QjtJQUNGLEVBQUUsT0FBT0osT0FBTztRQUNkLE9BQU9MLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFrQjtJQUN6RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG90d2lzZS1zZXJ2ZXIvLi9wYWdlcy9hcGkvYXV0aC9zZXNzaW9uLmpzPzYwYTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U2Vzc2lvblRva2VuLCB2ZXJpZnlTZXNzaW9uLCBzaWduU2Vzc2lvbiwgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9zZXNzaW9uJztcbmltcG9ydCB7IGdldEFjdGl2ZVN1YnNjcmlwdGlvbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9zdWJzY3JpcHRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgJ0dFVCcpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHRva2VuID0gZ2V0U2Vzc2lvblRva2VuKHJlcSk7XG4gIGlmICghdG9rZW4pIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aGVudGljYXRlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHBheWxvYWQgPSB2ZXJpZnlTZXNzaW9uKHRva2VuKTtcbiAgICBjb25zdCBhY3RpdmVTdWIgPSBhd2FpdCBnZXRBY3RpdmVTdWJzY3JpcHRpb24ocGF5bG9hZC51c2VySWQpO1xuICAgIGlmICghYWN0aXZlU3ViKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ1N1YnNjcmlwdGlvbiBpbmFjdGl2ZScgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlZnJlc2hlZFRva2VuID0gc2lnblNlc3Npb24oeyB1c2VySWQ6IHBheWxvYWQudXNlcklkLCBlbWFpbDogcGF5bG9hZC5lbWFpbCB9KTtcbiAgICBzZXRTZXNzaW9uQ29va2llKHJlcywgcmVmcmVzaGVkVG9rZW4pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsXG4gICAgICB1c2VySWQ6IHBheWxvYWQudXNlcklkXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhlbnRpY2F0ZWQnIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0U2Vzc2lvblRva2VuIiwidmVyaWZ5U2Vzc2lvbiIsInNpZ25TZXNzaW9uIiwic2V0U2Vzc2lvbkNvb2tpZSIsImdldEFjdGl2ZVN1YnNjcmlwdGlvbiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ0b2tlbiIsInBheWxvYWQiLCJhY3RpdmVTdWIiLCJ1c2VySWQiLCJyZWZyZXNoZWRUb2tlbiIsImVtYWlsIiwiYXV0aGVudGljYXRlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/session.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fsession&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fauth%2Fsession.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();